<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Menu Dropdown</title>
    <link rel="stylesheet" href="pages/login/login.css">
    <style>
        body {
            padding: 50px;
            background: #f8f9fa;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .debug-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            font-size: 14px;
        }
        .test-navbar {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîß Debug - Menu Dropdown</h1>
        
        <div class="debug-info">
            <strong>Status do Debug:</strong><br>
            - Abra o console do navegador (F12)<br>
            - Clique no bot√£o do usu√°rio abaixo<br>
            - Verifique as mensagens no console
        </div>

        <div class="test-navbar">
            <div class="nav-container">
                <div class="logo">
                    <h3>Chicas Eventos</h3>
                </div>
                <div class="login-btn">
                    <button class="btn-login" id="login-btn" style="display: none;">LOG IN</button>
                    <div class="user-menu" id="user-menu" style="display: block;">
                        <button class="btn-user" id="user-btn">
                            <span id="user-name">JO√ÉO SILVA</span>
                        </button>
                        <div class="dropdown-menu" id="dropdown-menu">
                            <a href="#" class="dropdown-item">MEUS EVENTOS</a>
                            <a href="#" class="dropdown-item">VER CARRINHO</a>
                            <a href="#" class="dropdown-item" id="logout-btn">SAIR DA CONTA</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="debug-info">
            <strong>Teste Manual:</strong><br>
            1. Clique no bot√£o "JO√ÉO SILVA"<br>
            2. O menu deve aparecer abaixo<br>
            3. Clique fora para fechar<br>
            4. Verifique o console para mensagens de debug
        </div>
    </div>

    <script>
        // Simular usu√°rio logado
        localStorage.setItem('chicasEventos_session', JSON.stringify({
            user: {
                id: 1,
                nome: 'Jo√£o Silva',
                email: 'joao@teste.com',
                telefone: '(11) 99999-9999',
                tipo: 'cliente',
                dataCadastro: new Date().toISOString()
            },
            timestamp: new Date().getTime(),
            lembrar: false
        }));

        // Debug manual do dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const userBtn = document.getElementById('user-btn');
            const dropdownMenu = document.getElementById('dropdown-menu');
            const logoutBtn = document.getElementById('logout-btn');

            console.log('Elementos encontrados:', { userBtn, dropdownMenu, logoutBtn });

            if (userBtn && dropdownMenu) {
                console.log('Configurando dropdown manualmente...');
                
                userBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    console.log('Bot√£o clicado!');
                    dropdownMenu.classList.toggle('show');
                    userBtn.classList.toggle('active');
                    console.log('Classes do dropdown:', dropdownMenu.classList.toString());
                });

                // Fechar ao clicar fora
                document.addEventListener('click', function(e) {
                    if (!userBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {
                        dropdownMenu.classList.remove('show');
                        userBtn.classList.remove('active');
                        console.log('Menu fechado por clique fora');
                    }
                });

                // Fechar com Escape
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape') {
                        dropdownMenu.classList.remove('show');
                        userBtn.classList.remove('active');
                        console.log('Menu fechado com Escape');
                    }
                });

                console.log('Dropdown configurado com sucesso!');
            } else {
                console.error('Elementos n√£o encontrados!');
            }
        });
    </script>
</body>
</html>
