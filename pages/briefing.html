<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Briefing — Chicas Eventos</title>
  <link rel="icon" href="../assets/public/img/favicon.png">
  <link rel="stylesheet" href="../assets/css/style.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { prefix: 'tw-', corePlugins: { preflight: false } };
  </script>
</head>
<body class="tw-min-h-screen tw-flex tw-flex-col tw-bg-white">

  <!-- HEADER -->
  <header class="site-header">
    <div class="container nav">
      <a class="brand" href="../index.html"><span class="logo"></span><strong>Chicas Eventos</strong></a>
      <button class="hamb md:tw-hidden" id="hamb" aria-label="Abrir menu">☰</button>
      <nav class="tw-hidden md:tw-block">
        <ul class="nav-list">
          <li><a href="servicos.html">Serviços</a></li>
          <li><a href="portfolio.html">Portfólio</a></li>
          <li><a href="sobre.html">Sobre</a></li>
          <li><a class="nav-cta" href="briefing.html">Fazer orçamento</a></li>
        </ul>
      </nav>
    </div>
    <ul id="menuMobile" class="nav-mobile" style="display:none">
      <li><a href="servicos.html">Serviços</a></li>
      <li><a href="portfolio.html">Portfólio</a></li>
      <li><a href="sobre.html">Sobre</a></li>
      <li><a class="nav-cta" href="briefing.html">Fazer orçamento</a></li>
    </ul>
  </header>

  <!-- CONTEÚDO -->
  <main class="tw-flex-1 tw-py-10">
    <div class="tw-container tw-mx-auto tw-max-w-6xl tw-px-4">
      <section class="tw-mx-auto tw-max-w-3xl tw-p-0 tw-rounded-[28px] tw-border tw-border-slate-200 tw-bg-white/85 tw-backdrop-blur-sm tw-overflow-hidden">
        
        <!-- Cabeçalho do balão -->
        <div class="tw-px-6 tw-pt-6 md:tw-px-10 md:tw-pt-10">
          <div class="tw-text-center">
            <span class="tw-text-xs tw-tracking-wide tw-font-semibold tw-text-slate-900 tw-uppercase">Orçamento</span>
            <h1 class="tw-text-3xl md:tw-text-4xl tw-font-extrabold tw-text-slate-900 tw-mt-1">Briefing rápido</h1>
            <p class="tw-text-slate-600 tw-mt-2">Leva menos de 2 min. Assim entendemos sua necessidade e preparamos um orçamento sob medida.</p>
          </div>
        </div>

        <!-- Barra de progresso centralizada -->
        <div class="tw-px-6 md:tw-px-10 tw-mt-4">
          <div class="tw-flex tw-justify-center">
            <div class="tw-w-[88%] md:tw-w-[82%] tw-max-w-[680px] tw-h-[6px] tw-bg-slate-100 tw-rounded-full">
              <div id="progressBar" class="tw-h-full tw-bg-slate-900 tw-rounded-full tw-w-[12%] tw-transition-all tw-duration-300"></div>
            </div>
          </div>
        </div>

        <!-- Formulário -->
        <div class="tw-p-6 md:tw-p-10">
          <form id="briefingForm" class="tw-space-y-10">
            <!-- STEP 1 -->
            <div class="step" data-step="1">
              <h2 class="tw-text-base tw-font-bold tw-text-slate-900 tw-mb-3">1) Seus dados</h2>
              <div class="tw-grid tw-gap-4 md:tw-grid-cols-2">
                <div class="md:tw-col-span-2">
                  <label class="tw-text-sm tw-font-semibold tw-text-slate-700">Nome</label>
                  <input class="tw-w-full tw-px-4 tw-py-3 tw-rounded-xl tw-border tw-border-slate-200 tw-text-slate-900 placeholder:tw-text-slate-400 focus:tw-outline-none focus:tw-border-slate-700" name="nome" required placeholder="Seu nome completo">
                </div>
                <div>
                  <label class="tw-text-sm tw-font-semibold tw-text-slate-700">Telefone</label>
                  <input class="tw-w-full tw-px-4 tw-py-3 tw-rounded-xl tw-border tw-border-slate-200 tw-text-slate-900 placeholder:tw-text-slate-400 focus:tw-outline-none focus:tw-border-slate-700" name="telefone" required placeholder="(00) 00000-0000">
                </div>
                <div>
                  <label class="tw-text-sm tw-font-semibold tw-text-slate-700">E-mail</label>
                  <input type="email" class="tw-w-full tw-px-4 tw-py-3 tw-rounded-xl tw-border tw-border-slate-200 tw-text-slate-900 placeholder:tw-text-slate-400 focus:tw-outline-none focus:tw-border-slate-700" name="email" required placeholder="voce@email.com">
                </div>
              </div>
            </div>

            <!-- STEP 2 -->
            <div class="step" data-step="2" style="display:none">
              <h2 class="tw-text-base tw-font-bold tw-text-slate-900 tw-mb-3">2) Que tipo de evento será?</h2>
              <select class="tw-w-full tw-px-4 tw-py-3 tw-rounded-xl tw-border tw-border-slate-200 tw-text-slate-900 focus:tw-outline-none focus:tw-border-slate-700" name="tipo_evento" required>
                <option value="" disabled selected>Selecione…</option>
                <option>Corporativo</option>
                <option>Conferência / Feira</option>
                <option>Aniversário</option>
                <option>Casamento</option>
                <option>Lançamento de produto</option>
                <option>Outro</option>
              </select>
            </div>

            <!-- STEP 3 -->
            <div class="step" data-step="3" style="display:none">
              <h2 class="tw-text-base tw-font-bold tw-text-slate-900 tw-mb-3">3) Buffet</h2>
              <div class="tw-flex tw-gap-3 tw-flex-wrap tw-mb-3">
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-toggle="buffet" data-value="sim">Preciso de buffet</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-toggle="buffet" data-value="nao">Não preciso</button>
              </div>
              <div id="buffetTipos" class="tw-hidden tw-grid tw-gap-3 md:tw-grid-cols-2">
                <label class="tw-text-sm tw-font-semibold tw-text-slate-700 md:tw-col-span-2">Que tipo de buffet?</label>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-multi="tipo_buffet" data-value="Coffee break">Coffee break</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-multi="tipo_buffet" data-value="Coquetel">Coquetel</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-multi="tipo_buffet" data-value="Brunch">Brunch</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-multi="tipo_buffet" data-value="Almoço/Jantar">Almoço/Jantar</button>
              </div>
              <div id="buffetCustomWrap" class="tw-hidden tw-mt-4">
                <label class="tw-text-sm tw-font-semibold tw-text-slate-700">Preferências do buffet (opcional)</label>
                <textarea class="tw-w-full tw-px-4 tw-py-3 tw-rounded-xl tw-border tw-border-slate-200 tw-text-slate-900 focus:tw-outline-none focus:tw-border-slate-700" rows="3" name="buffet_custom" placeholder="Ex.: Coquetel com opções sem lactose, incluir sucos naturais..."></textarea>
              </div>
            </div>

            <!-- STEP 4 -->
            <div class="step" data-step="4" style="display:none">
              <h2 class="tw-text-base tw-font-bold tw-text-slate-900 tw-mb-3">4) Cobertura audiovisual</h2>
              <div class="tw-flex tw-gap-3 tw-flex-wrap tw-mb-3">
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-toggle="aud" data-value="sim">Preciso de cobertura</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300 tw-transition" data-toggle="aud" data-value="nao">Não preciso</button>
              </div>
              <div id="audTipos" class="tw-hidden tw-grid tw-gap-3 md:tw-grid-cols-3">
                <label class="tw-text-sm tw-font-semibold tw-text-slate-700 md:tw-col-span-3">De que tipo?</label>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_aud" data-value="Foto">Foto</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_aud" data-value="Vídeo">Vídeo</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_aud" data-value="Drone">Drone</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_aud" data-value="Social media (reels/stories)">Social media</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_aud" data-value="Pacote completo">Pacote completo</button>
              </div>
            </div>

            <!-- STEP 5 -->
            <div class="step" data-step="5" style="display:none">
              <h2 class="tw-text-base tw-font-bold tw-text-slate-900 tw-mb-3">5) Equipe operacional (RH)</h2>
              <div class="tw-flex tw-gap-3 tw-flex-wrap tw-mb-3">
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-toggle="rh" data-value="sim">Preciso de equipe</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-toggle="rh" data-value="nao">Não preciso</button>
              </div>
              <div id="rhTipos" class="tw-hidden tw-grid tw-gap-3 md:tw-grid-cols-2">
                <label class="tw-text-sm tw-font-semibold tw-text-slate-700 md:tw-col-span-2">Qual(is) desses?</label>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_rh" data-value="Garçom">Garçom</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_rh" data-value="Recepcionista">Recepcionista</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_rh" data-value="Segurança">Segurança</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-multi="tipo_rh" data-value="Apoio/Operacional">Apoio/Operacional</button>
              </div>
            </div>

            <!-- STEP 6 -->
            <div class="step" data-step="6" style="display:none">
              <h2 class="tw-text-base tw-font-bold tw-text-slate-900 tw-mb-3">6) Cerimonial</h2>
              <p class="tw-text-slate-700 tw-mb-3">Nosso cerimonial cuida do planejamento completo, cronograma, fornecedores e execução no dia.</p>
              <div class="tw-flex tw-gap-3 tw-flex-wrap">
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-toggle="cerim" data-value="sim">Quero cerimonial</button>
                <button type="button" class="tw-inline-flex tw-items-center tw-gap-2 tw-px-4 tw-py-2 tw-rounded-full tw-border tw-border-slate-200 tw-bg-white tw-text-slate-800 hover:tw-border-slate-300" data-toggle="cerim" data-value="nao">Não preciso</button>
              </div>
              <div class="tw-mt-4">
                <label class="tw-text-sm tw-font-semibold tw-text-slate-700">Observações (opcional)</label>
                <textarea class="tw-w-full tw-px-4 tw-py-3 tw-rounded-xl tw-border tw-border-slate-200 tw-text-slate-900 focus:tw-outline-none focus:tw-border-slate-700" rows="3" name="obs" placeholder="Datas, horários, local, estimativa de público…"></textarea>
              </div>
            </div>

            <!-- Navegação -->
            <div class="tw-flex tw-justify-between tw-items-center">
              <button type="button" id="prevBtn" class="tw-inline-flex tw-items-center tw-justify-center tw-px-5 tw-py-3 tw-rounded-xl tw-font-semibold tw-bg-white tw-text-slate-900 tw-border tw-border-slate-200 hover:tw-bg-slate-50">← Voltar</button>
              <div class="tw-flex tw-gap-2">
                <button type="button" id="nextBtn" class="tw-inline-flex tw-items-center tw-justify-center tw-px-5 tw-py-3 tw-rounded-xl tw-font-semibold tw-bg-slate-900 tw-text-white hover:tw-opacity-95">Próximo →</button>
              </div>
            </div>
          </form>

          <div id="statusBox" class="tw-hidden tw-mt-6 tw-text-center"></div>
        </div>
      </section>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="site-footer tw-mt-10">
    <div class="container footer-wrap">
      <div class="f-col">
        <div class="brand-line">
          <img src="../assets/public/img/favicon.png" alt="" class="f-logo" />
          <span class="f-brand">Chicas Eventos</span>
        </div>
        <p class="f-desc">Sabores que marcam momentos especiais! Personalize seu cardápio e torne seu evento inesquecível com nosso buffet exclusivo.</p>
        <div class="f-copy">© 2025 · Justke Design</div>
      </div>
      <div class="f-col">
        <h4 class="f-title">Navegue pelo site</h4>
        <ul class="f-links">
          <li><a href="servicos/buffet.html">Buffet</a></li>
          <li><a href="portfolio.html">Galeria</a></li>
          <li><a href="sobre.html">Sobre Nós</a></li>
          <li><a href="briefing.html">Contato</a></li>
        </ul>
      </div>
      <div class="f-col">
        <h4 class="f-title">Receba novidades e promoções!</h4>
        <p class="f-hint">Fique por dentro das novidades!</p>
        <form class="f-news" onsubmit="event.preventDefault(); alert('Valeu! (plugaremos depois)')">
          <input type="email" placeholder="Endereço de e-mail" required>
          <button aria-label="Enviar"><span class="dot"></span></button>
        </form>
      </div>
    </div>
  </footer>

  <!-- Menu mobile -->
  <script>
    const hamb = document.getElementById('hamb');
    const menuMobile = document.getElementById('menuMobile');
    hamb?.addEventListener('click', () => {
      const show = menuMobile.style.display !== 'block';
      menuMobile.style.display = show ? 'block' : 'none';
    });
    menuMobile?.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
      menuMobile.style.display = 'none';
    }));
  </script>

  <!-- Lógica -->
  <script>
    // URL do seu Apps Script (nova)
    const WEBHOOK_URL = 'https://script.google.com/macros/s/AKfycbzbfANL3UPIMbceYdLhNYN7a6-4F3ZJLbDrczqJlGKrha1yyxb9THnYFC0lrymYYKwF/exec';
    // opcional: e-mail extra para cópia (o servidor já envia ao NOTIFY_TO)
    const EXTRA_NOTIFY = 'rj.justke@gmail.com'; // ex.: 'atendimento@chicas.com.br'

    const steps = Array.from(document.querySelectorAll('.step'));
    const totalSteps = steps.length;
    const progressBar = document.getElementById('progressBar');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const form = document.getElementById('briefingForm');
    const statusBox = document.getElementById('statusBox');

    let current = 0;
    const state = { buffet:null, tipo_buffet:new Set(), aud:null, tipo_aud:new Set(), rh:null, tipo_rh:new Set(), cerim:null };

    function updateProgress(){
      const pct = Math.round(((current+1)/totalSteps)*100);
      progressBar.style.width = pct + '%';
    }
    function updateUI(){
      steps.forEach((s,i)=> s.style.display = i===current ? 'block' : 'none');
      updateProgress();
      prevBtn.disabled = current === 0;
      prevBtn.classList.toggle('tw-opacity-50', prevBtn.disabled);
      nextBtn.textContent = (current === totalSteps-1) ? 'Enviar' : 'Próximo →';
    }
    function goNext(){ if (current < totalSteps-1){ current++; updateUI(); window.scrollTo({top:0, behavior:'smooth'});} else { submitNow(); } }
    function goPrev(){ if (current > 0){ current--; updateUI(); window.scrollTo({top:0, behavior:'smooth'});} }
    nextBtn.addEventListener('click', goNext);
    prevBtn.addEventListener('click', goPrev);

    function toggleSingle(group, value){
      document.querySelectorAll(`.tw-inline-flex[data-toggle="${group}"]`).forEach(el=>{
        el.dataset.checked = (el.dataset.value===value)?"true":"false";
        el.classList.toggle('tw-bg-slate-900', el.dataset.checked==="true");
        el.classList.toggle('tw-text-white', el.dataset.checked==="true");
        el.classList.toggle('tw-border-slate-900', el.dataset.checked==="true");
      });
      state[group] = value;
      if(group==='buffet'){
        document.getElementById('buffetTipos').classList.toggle('tw-hidden', value!=='sim');
        document.getElementById('buffetCustomWrap').classList.toggle('tw-hidden', value!=='sim');
        if(value!=='sim'){
          state.tipo_buffet.clear();
          document.querySelectorAll('[data-multi="tipo_buffet"]').forEach(b=>{
            b.dataset.checked="false";
            b.classList.remove('tw-bg-slate-900','tw-text-white','tw-border-slate-900');
          });
          const tx = document.querySelector('[name="buffet_custom"]'); if (tx) tx.value='';
        }
      }
      if(group==='aud'){
        document.getElementById('audTipos').classList.toggle('tw-hidden', value!=='sim');
        if(value!=='sim'){
          state.tipo_aud.clear();
          document.querySelectorAll('[data-multi="tipo_aud"]').forEach(b=>{
            b.dataset.checked="false";
            b.classList.remove('tw-bg-slate-900','tw-text-white','tw-border-slate-900');
          });
        }
      }
      if(group==='rh'){
        document.getElementById('rhTipos').classList.toggle('tw-hidden', value!=='sim');
        if(value!=='sim'){
          state.tipo_rh.clear();
          document.querySelectorAll('[data-multi="tipo_rh"]').forEach(b=>{
            b.dataset.checked="false";
            b.classList.remove('tw-bg-slate-900','tw-text-white','tw-border-slate-900');
          });
        }
      }
      if(group==='cerim'){ /* nada extra */ }
    }
    function toggleMulti(group, value, el){
      const set = state[group];
      if(set.has(value)){
        set.delete(value);
        el.dataset.checked="false";
        el.classList.remove('tw-bg-slate-900','tw-text-white','tw-border-slate-900');
      } else {
        set.add(value);
        el.dataset.checked="true";
        el.classList.add('tw-bg-slate-900','tw-text-white','tw-border-slate-900');
      }
    }
    document.querySelectorAll('[data-toggle]').forEach(btn=> btn.addEventListener('click', ()=> toggleSingle(btn.dataset.toggle, btn.dataset.value)));
    document.querySelectorAll('[data-multi]').forEach(btn=> btn.addEventListener('click', ()=> toggleMulti(btn.dataset.multi, btn.dataset.value, btn)));

    function formToObject(){
      const fd = new FormData(form);
      return {
        nome: fd.get('nome') || '',
        telefone: fd.get('telefone') || '',
        email: fd.get('email') || '',
        tipo_evento: fd.get('tipo_evento') || '',
        buffet: state.buffet,
        tipo_buffet: Array.from(state.tipo_buffet),
        buffet_custom: fd.get('buffet_custom') || '',
        aud: state.aud,
        tipo_aud: Array.from(state.tipo_aud),
        rh: state.rh,
        tipo_rh: Array.from(state.tipo_rh),
        cerim: state.cerim,
        obs: fd.get('obs') || '',
        timestamp: new Date().toISOString(),
        ...(EXTRA_NOTIFY ? { notify_email: EXTRA_NOTIFY } : {})
      };
    }

    function setLoading(isLoading){
      [prevBtn,nextBtn].forEach(b=> b && (b.disabled=isLoading));
      if(isLoading){ nextBtn?.classList.add('tw-opacity-60','tw-cursor-not-allowed'); nextBtn && (nextBtn.textContent='Enviando…'); }
      else { nextBtn?.classList.remove('tw-opacity-60','tw-cursor-not-allowed'); updateUI(); }
    }

    function showStatus(ok,msg){
      statusBox.className='tw-mt-6 tw-text-center';
      statusBox.classList.add(ok?'tw-text-slate-900':'tw-text-red-600');
      statusBox.innerHTML=`<div class="tw-font-semibold">${msg}</div>`;
      statusBox.classList.remove('tw-hidden');
    }

    // sendJSON robusto: em no-cors manda FormData(payload) para evitar preflight
    async function sendJSON(url, data, mode='cors'){
      if (mode === 'no-cors'){
        const fd = new FormData();
        fd.append('payload', JSON.stringify(data));
        return fetch(url, { method:'POST', mode:'no-cors', body: fd });
      }
      return fetch(url, {
        method:'POST',
        headers:{ 'Content-Type':'application/json' },
        body: JSON.stringify(data),
        mode:'cors'
      });
    }

    function renderSuccessScreen() {
      steps.forEach(s => s.style.display='none');
      const msg = `
        <div class="tw-text-center tw-space-y-4 tw-pt-4">
          <h3 class="tw-text-2xl tw-font-extrabold tw-text-slate-900">Briefing enviado!</h3>
          <p class="tw-text-slate-700">Em instantes a nossa equipe irá entrar em contato. Muito obrigado.</p>
          <a href="portfolio.html" class="tw-inline-flex tw-items-center tw-justify-center tw-px-6 tw-py-3 tw-rounded-xl tw-font-semibold tw-bg-slate-900 tw-text-white hover:tw-opacity-95">
            Ver portfólio →
          </a>
        </div>
      `;
      statusBox.className = 'tw-mt-6';
      statusBox.innerHTML = msg;
      statusBox.classList.remove('tw-hidden');
      prevBtn.style.display = 'none';
      nextBtn.style.display = 'none';
    }

    function postViaHiddenForm(url, payloadObj){
      const f = document.createElement('form');
      f.action = url; f.method = 'POST'; f.target = '_hidden_iframe'; f.style.display='none';
      const input = document.createElement('input');
      input.type = 'hidden'; input.name = 'payload'; input.value = JSON.stringify(payloadObj);
      f.appendChild(input);
      let iframe = document.getElementById('_hidden_iframe');
      if (!iframe){ iframe = document.createElement('iframe'); iframe.name='_hidden_iframe'; iframe.id='_hidden_iframe'; iframe.style.display='none'; document.body.appendChild(iframe); }
      document.body.appendChild(f); f.submit();
    }

    async function submitNow(){
      const data = formToObject();
      setLoading(true);
      try{
        // 1) tenta CORS normal
        let res = await sendJSON(WEBHOOK_URL, data, 'cors');
        if (!res.ok){
          // 2) tenta no-cors
          await sendJSON(WEBHOOK_URL, data, 'no-cors');
          setLoading(false);
          renderSuccessScreen();
          window.scrollTo({top:0,behavior:'smooth'});
          return;
        }
        await res.json().catch(()=>null);
        setLoading(false);
        renderSuccessScreen();
        window.scrollTo({top:0,behavior:'smooth'});
      }catch(err){
        // 3) fallback por form oculto
        try{
          postViaHiddenForm(WEBHOOK_URL, data);
          setLoading(false);
          renderSuccessScreen();
          window.scrollTo({top:0,behavior:'smooth'});
        }catch(_){
          setLoading(false);
          showStatus(false, 'Não foi possível enviar. Verifique a URL do Web App e as permissões.');
        }
      }
    }

    // Evita submit tradicional
    form.addEventListener('submit', (e)=> e.preventDefault());

    // inicia interface
    updateUI();
  </script>
</body>
</html>
